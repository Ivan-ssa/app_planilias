<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ronda de Manuten√ß√£o - Log de Novos Itens</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        input { text-transform: uppercase; }
        .status-ativo { background-color: #dcfce7; color: #166534; border: 1px solid #166534; }
        .status-inativo { background-color: #fee2e2; color: #991b1b; border: 1px solid #991b1b; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .item-novo { animation: highlight 1s ease-out; }
        @keyframes highlight {
            0% { background-color: #fef08a; }
            100% { background-color: white; }
        }
    </style>
</head>
<body class="bg-slate-100 p-2 sm:p-4 font-sans text-slate-800">
    <div class="max-w-7xl mx-auto">
        
        <div class="bg-white rounded-xl shadow-sm p-4 mb-4 border-b-4 border-blue-600 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold text-blue-900 uppercase">Ronda Hospitalar</h1>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-tighter">Visualiza√ß√£o de Novos Itens</p>
            </div>
            <div id="contador" class="bg-blue-600 text-white px-6 py-2 rounded-full font-black text-lg shadow-inner">0</div>
        </div>

        <div id="setup" class="bg-white p-4 rounded-xl shadow-sm mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 border border-blue-100">
            <div>
                <label class="text-[10px] font-bold text-blue-700 uppercase">1. Importar Base (JSON)</label>
                <input type="file" id="arquivoJson" accept=".json" class="text-xs w-full bg-slate-50 p-2 border rounded mt-1">
            </div>
            <div id="passo2" class="opacity-30 pointer-events-none transition-opacity">
                <label class="text-[10px] font-bold text-green-700 uppercase">2. Continuar Anterior (CSV)</label>
                <input type="file" id="arquivoCsvProgresso" accept=".csv" class="text-xs w-full bg-slate-50 p-2 border rounded mt-1">
            </div>
        </div>

        <div id="appBody" class="hidden">
            <div class="bg-blue-900 p-4 rounded-t-xl shadow-lg flex flex-wrap gap-4 items-end">
                <div class="flex-1 min-w-[200px]">
                    <input type="text" id="busca" placeholder="BUSCAR TAG OU S√âRIE..." class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder:text-white/50 outline-none focus:bg-white focus:text-blue-900 transition-all">
                </div>
                <div class="flex-1 min-w-[200px]">
                    <select id="filtroSetor" class="w-full p-3 rounded-lg bg-white border-none font-bold text-blue-900 outline-none">
                        <option value="">FILTRAR POR SETOR...</option>
                    </select>
                </div>
                <button onclick="window.location.reload()" class="text-white/50 hover:text-white text-[10px] font-bold uppercase underline pb-3">Reiniciar</button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mt-1">
                
                <div class="bg-white rounded-b-xl lg:rounded-bl-xl shadow-md p-4 border-x border-b">
                    <h2 class="text-xs font-black text-slate-400 uppercase mb-4 tracking-widest">üîç Localizar Equipamento</h2>
                    <div id="listaEquipamentos" class="space-y-3 max-h-[550px] overflow-y-auto pr-2">
                        <p class="text-slate-400 text-sm italic text-center py-20 uppercase font-bold">Aguardando busca ou setor...</p>
                    </div>
                </div>

                <div class="bg-slate-50 rounded-b-xl lg:rounded-br-xl shadow-md p-4 border-x border-b border-slate-200">
                    <h2 class="text-xs font-black text-green-600 uppercase mb-4 tracking-widest">‚úÖ Novos Itens nesta Ronda</h2>
                    <div id="listaColeta" class="space-y-2 max-h-[480px] overflow-y-auto pr-2 mb-4">
                        <p class="text-slate-400 text-sm italic text-center py-20 uppercase font-bold opacity-30">Nenhum item adicionado ainda</p>
                    </div>
                    
                    <button onclick="exportarDados()" class="w-full bg-green-600 hover:bg-green-700 text-white p-4 rounded-xl font-black shadow-lg transition-all active:scale-95 flex items-center justify-center gap-3 uppercase">
                        üì• Finalizar e Baixar CSV
                    </button>
                </div>
            </div>
        </div>
    </div>